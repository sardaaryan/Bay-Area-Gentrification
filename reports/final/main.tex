\documentclass{article}

\usepackage[margin=1in]{geometry}
\usepackage{graphicx}

\usepackage{pgfgantt}

\usepackage{listings}
\usepackage{xcolor}
\usepackage{xparse}
\NewDocumentCommand{\codeword}{v}{%
\texttt{\textcolor{blue}{#1}}%
}
\lstset{language=C,keywordstyle={\bfseries \color{blue}}}

\usepackage[breaklinks]{hyperref}
\def\UrlBreaks{\do\/\do-}


\title{The Gentrification of the San Francisco Bay Area \\ \large TEAM-17 Final Report}
\author{Benicio Bailey, Jacob Feenstra, Diane Kim, Aryan Sarda}

\begin{document}
\maketitle

\section{Motivations \& Objectives}

    Team 17's visualization educates the user on the complicated, worsening dilemma of gentrification in the San Francisco Bay Area, and how one of the most prominent causes is the success \& splendor of Silicon Valley, the largest technological hub in the world. Highly salaried engineers not only out-price the longtime residents, artists, musicians, and tradesmen of the Bay Area, but they cause housing prices to soar, which results in homeowner displacement. This is especially because Silicon Valley is an anomaly of innovation \& revenue, generating a GDP that outclasses many whole countries. This visualization idiom portrays this as a crucial piece to understanding gentrification in the Bay Area, and that it's heightened here because of the monetary monopoly that is the tech industry on the West Coast. While there are myriad causes in the circumstances of Bay Area gentrification, Silicon Valley is a deeply significant one (arguably the most significant). We have chosen to prioritize it for this project, and make the connection between the industry and the gentrification crisis visually clear. We have focused on a dataset of gentrification criteria from 2010 to 2023 because it offered the most complete selection from the census (the American Community Survey, or ACS). It also highlights that this is a contemporary issue; and it is poised to get worse. The success of Silicon Valley during the coronavirus pandemic (due to digitization \& stay-at-home orders) has made the industry more of an economic powerhouse than ever before.
    
    To tell this story, we have developed a user experience that revolves around interactive census tract maps, charting gentrification across a timeline, and tailoring annotations of significant Silicon Valley statistics on a year-to-year basis as the user freely explores the visualization idiom. An important feature of the user's synopsis of our visualization is the ability to infer changes between 2010 and 2023, by referencing between the annotations \& the heatmap as they dynamically update. This tells the story of burgeoning gentrification. Note gentrification is a heterogeneous measure, one of stunning socioeconomic disparities in relatively small geographic regions; we tie this notion with Silicon Valley's presence (places which are notably more affected than others).
    
    Gentrification is admittedly difficult to fully classify (there is no scientific consensus on it's definition, or \textit{even} whether it's good or bad, although it is considered bad in popular culture). The vis idiom does some of the heavy-lifting, performing all the necessary classification processing (mostly in preprocessing the ACS data tables, one of the more difficult bottlenecks in our project lifetime, as well as the martini-like introductory article; more on this in section \ref{design}) and delivering it to the user in a visual medium. Hence, gentrification becomes more intuitive in the context of a visual story, and the user simply needs to interactively navigate our findings. By promoting exploration, and insights derived during the user's exploration, we believe this promotes greater understanding and retention than simply doing a slideshow (and general pedagogical principle seems to support this idea too).

\section{Driving Application \& Dataset}
    
    When determining how to quantify gentrification, it is important to retain a degree of heterogeneity. Gentrification is inherently disjointed: occurring in some places but not others, oftentimes within the same city or county. It is a defining feature of the phenomenon. The census tract became the most obvious contender for creating this sense of physical distribution; one census tract might have intense gentrification, but another one directly adjacent to it might experience no gentrification at all. It is precisely these dichotomies that assist in charting gentrification: residents in a community get pushed out, and the next community over may experience no such thing, for any number of reasons. The American Community Survey (ACS), an annual demographics survey program conducted by the United States Census Bureau, became an obvious choice since it measures it's values on the granularity of census tracts. It ensures this feature of gentrification is preserved. It also offers a robust dataset of our attributes, described below.

    Our final dataset consists of six attributes, taken from ACS data tables from 2010-2023: Population (B01003), Median Household Income (S1901), Median Home Value (S2506), Gross Rent (B25064), Vacancy Rate (B25002), and Educational Attainment (S1501). The alphanumeric codes are ACS codes and uniquely identify the variables. Each of these was then filtered to be measured by census tract, and for only the nine counties incorporating the San Francisco Bay Area (Alameda, Contra Costa, Napa, Marin, San Francisco, San Mateo, Santa Clara, Solano and Sonoma). These are the CSV files prior to preprocessing, which is discussed next.

    Preprocessing is pretty extensive, so to view the scripts we used (and run them yourself if you would like!), see our \codeword{README.md} at the root of the directory. For a quick overview: we remove extraneous elements from comma-separated variable names, all margin-of-error variables, and include a year variable to condense all ACS CSV files for a given measurement to a singular one. When all is finished, there's 6 CSV files (one for each attribute). We perform some other tweaks as well, but more of that in the read-me.

    Five of the CSV variables are used to measure gentrification (all but the population variable) for a census tract in a given year; we describe this process in extensive detail in the visualization, and the formula used to colorcode the tracts (getting from the ACS variables to a defined range for colorcoding).

    Another part of our "dataset" is the topo.json files, both for the interactive Bay Area county map, and the heatmapped census tracts for each of the 9 counties. Our ACS values are used to colorcode the heatmaps. The implementation is discussed in greater detail in the \codeword{README.md}.

\section{Challenges Addressed}

    The goal to tie the success story of Silicon Valley to the burgeoning housing crisis in SF was not an easy task, requiring a lot of research into exactly \textit{what} success looks like in Silicon Valley. Preeminent in this consideration was the storytelling aspects of this success, and how to properly visualize it. The story and the visualizations needed to support each other, and importantly, not obfuscate the underlying dataset. We decided to separate the two (heatmap/dashboard of gentrification attributes, and explorable timeline annotations of Silicon Valley statistics), but keep them linked via a dashboard, so that their relationship would be obvious but not obscure details from each other.
    
    The annotations also needed to summarily \& indirectly report the successes of Silicon Valley without being too verbose, and offer rationalization for rising gentrification. Since we do not have a complete picture of gentrification (due to our project's emphasis, and the complexity of it as a topic), the annotations serve to support our heatmap dataset. Refining them into compact pieces of information took time.
    
    All of the methods in our codebase accept dataset input dynamically: one method for all heatmaps, one for all stream graphs, one for all bar-charts, and so on (the methods themselves are described in section \ref{design}). The intent was to reuse as much code as possible and keep our codebase clean. This even includes a dynamic topo.json file input, for the census tract illustrations! This ended up being difficult to get right, but it ensured that we did not have to reinvent the wheel while writing our JavaScript. We'll discuss the implementation aspects in detail in section \ref{impl}.
     
    Our formula to calculate the heatmap values from the gentrification attributes underwent many evolutions, and was one of the more difficult components when ascertaining the input to our visualization. More generally, the pipeline from ACS data tables to formula output was very involved, and is highlighted in our \codeword{README.md} file. To get some insight on the heatmap formula, read the article prefacing our visualization. 

    Another challenge has to do with changes in the way in which the ACS has defined census tracts over the years. In example: Census Tract 101 in San Francisco County in 2010 is "split" into Census Tract 101.01 and 101.02 in future surveys (this happens in 2019, and it remains consistent until 2023). This presented a unique challenge for the way in which we transition between years where census tracts become split. Initially, we consolidated the split census tracts into a single census tract (grouped by their whole whole number), but our topo.json census maps were generated in the year 2018, so we decided to keep the census tract designations as they were in the ACS data tables.

\section{Background \& Related Work}

    The very first brainstorm of this project was a simple measurement of population exodus in the greater Bay Area, using a heatmap, due to the COVID-19 pandemic. While there was an exodus, the population of the greater Bay Area (if not San Francisco) has rebounded in the years following the release of the stay-at-home orders. It would not have been a very interesting visualization, and so, we considered other aspects of the Bay Area (a place that many of us Northern Californians call home, and with a lot of interesting visual insights to explore), and landed on the rampant gentrification it has experienced, especially \textit{because} of the pandemic. There is no sign that the housing/gentrification crisis in the Bay Area will get any better. Indeed, as our visualization will explore, Silicon Valley is doing better than it ever has, even better than it's glory days. And so we settled on the gentrification of the San Francisco Bay Area.

    In an effort to quantitatively \& qualitatively measure gentrification, and to do it with some scholarly backing, we derived our gentrification attributes from a paper entitled "A Methodology for Measuring Neighborhood Change." The article comes from CityScape, an effort by the Office of Policy Development and Research of the U.S. Department of Housing Urban Development to publish high-quality research on community housing. It can be accessed in our visualization and from our references. It lays out a detailed means of measuring gentrification using the 5 attributes (our sixth attribute, population, is not used to measure gentrification; but we still feel it is a helpful statistic in our visualization). We have taken this formula, and modified it for use on a county-wide basis rather than a city-wide basis. The full extent of how we modified this formula, and refactored it to work in the context of heatmaps, can be explored in our introductory section (\codeword{intro.html}).
    
    While we had a sound way to quantify gentrification, we had not yet tied these results to the successes of Silicon Valley from the years 2010-2023. After extensive research for potential resources, we settled on a book by Piero Scaruffi: \textit{A History of Silicon Valley, Vol. II: The 21st Century}. Dr. Scaruffi is a visiting scholar at Harvard University and Stanford University, and has self-published a large body of work on his own blog website. His book is the most complete offering we found for contemporary Silicon Valley history. Many of our annotations are paraphrased from two key chapters: "The Smart Generation (2011-2018)", and "The Age of the Impossible (2019-2023)". We compiled approximately one hundred annotations, to ensure a complete picture of what has transpired in Silicon Valley in these years, and to substantiate just how successful the industry has been. Many of these annotations exist as inputs into the \codeword{annotations.js} method (and it is called in \codeword{county.js}).
    
    There is a number of miscellaneous related work that we did not end up using in our visualizations, but some of them served as inspirations, ranging from mild to significant. These will be included in the references for posterity. Much of them helped direct the project to its present state, serving as pointers \& sanity checks. Most of them consist of local Bay Area articles on the gentrification/housing crisis, and a few are gentrification visualizations that helped us to formalize our own method (note none of our source code comes from these implementations).

\section{Design \& Methodology} \label{design}
   
\begin{description}

    \item[Introduction:] A martini glass-like introduction highlighting the purpose of the visualization, how the underlying dataset is used, and a few interaction tips, before releasing the user to freely explore the Bay Area gentrification map. It's a simple, interactive article to situate the user properly.
    
    \item[Bay Area Map:] A 9-county view of the bay area, and the user selects one of the 9 counties presented. This is a very simplified part of the visualization, intended to steer the user to the county they wish to explore. The intention is to not overwhelm the user at what is essentially the "home page" for the project.
    
    \item[County Heatmap:] When the county is clicked on, the visualization really opens up, to something much more complicated than the Bay Area view.
    
    \begin{description}
    
        \item[Census Tract Heatmap:] Perhaps the most advanced part of the entire project, the census tracts of a county are represented on a heatmap. It's a conventional 2-color heatmap from white to red; white represents no gentrification in a given county tract, whereas red indicates extreme gentrification. This is gentrification between the previous year and the current year (see the formula in \codeword{intro.html}). Most census tracts fall somewhere in-between. Grey census tracts indicate incomplete criteria. By hovering over a census tract, the user can see the various attributes for a given census tract: it's Median Home Value, Median Household Income, Occupancy Status (also known as Vacancy Status), Gross Rent, Population, and Educational Attainment. Note that since the year 2010 is our baseline, it is all white color-coded. See our \codeword{intro.html} for more insight into this.
        
        \item[2010-2023 Timeline:] Just as important as the gentrification criteria themselves is visualizing how they \textit{change} over the years. The user interacts with a slider defined for 2010 to 2023, and the census tract's year corresponds to the year on the slider. The heatmap changes in "real-time", and the user is able to see how particular communities change in their gentrification criteria (with the heatmap). The visualization dashboard follows suit as well.
        
        \item[Vis Dashboard:] A dashboard lies adjacent to the heatmap. Using secondary visualizations to provide context for the heatmap, it consists of the following components.
        
        \begin{description}
        
            \item[Timeline Annotations:] One section of the dashboard consists of timeline annotations, providing context for what occurred in Silicon Valley in the given year to corroborate shifts in gentrification, and guiding the user to glean insights from the data. These annotations shift year-to-year as significant events happen in the Bay Area.
            
            \item[Stream Graph:] To quickly ascertain how the gentrification criteria changes over the years (the heatmap, while interactive \& intuitive, doesn't really encode \textit{how} the data changes in one viewing window), the stream graph shows how the 6 attributes change from 2010-2023 for a selected census tract. The user clicks on a census tract, then the stream graph charts the change in gentrification criteria for this given census tract.
            
            \item[Median Table:] For the six attributes of the dataset, the dashboard also has a tabulation of the medians of the six attributes, across all census tracts for the selected county for the given year. This gives the user a quick snapshot of whether or not these values are increasing or decreasing year-to-year. Since the heatmap is large, it's difficult to immediately ascertain if gentrification has increased from one year to the next. The table will clue the user in on heatmap trends, but it is not intended to be viewed in isolation. 
            
        \end{description}
        
    \end{description}
    
\end{description}

    Compared to the very beginning of our visualization drafting, the primary changes have been hybridizing our drill-down method into a martini/drill-down method. This is mainly seen in the initial article that sets the stage for the user to then interact with the visualization idiom. The greater emphasis on gentrification, and drawing a comparison to Silicon Valley, also came through in the later drafting stages (mainly the timeline annotations). The dataset also narrowed from the housing crisis at large (or populations) to gentrification in the Bay Area. The sixth attribute, population, is an artifact of our initial plans for the coronavirus exodus. We decided to keep it, as it offers insight into residential displacement due to gentrification. 
    
    The methodology of our design aims to support the user's understanding of gentrification, and Silicon Valley annotations, at every step of the way; every dot on the timeline supports the onset (and worsening) of gentrification. The most important facility of this relationship is the comparison between the annotations and the changes in the heatmap (also, not compromising the user's ability to draw comparisons between these components). The drill-down method was a good choice for this medium. The user acquires sufficient information, but is still allowed to freely explore the full project, and understand gentrification in the Bay Area on their own terms. The annotations aid in telling the story, without getting in the way of the diagrams, reinforcing events in the tech industry. Keeping these "together but separate" was a very important consideration in our methodology.
    
\section{Implementation Considerations} \label{impl}

    When it came to implementing the visualization, ensuring methods accepted dynamic input was critical. All of our methods (primarily in the \codeword{county/} folder; all the code here handles the census tract heatmap and dashboard visualizations) needed to be modularized for different topo.json files, as well as county and year variables. The CSV file is read for the county \& year pairing for the currently displayed visualization, so while the underlying logic and input structure is the same, the specified county \& year changes whenever the user exits a given county, or interacts with the timeline slider (so fairly frequently). All of the methods are designed for a generic year \& county pairing. The relevant data is read once from the CSV files into an object, which is then filtered \& passed to the visualization methods. This kept our codespace much, much smaller than it would have been.
    
    We decided to have many HTML, JavaScript, and CSS files, and group their functionality by the name of their directories for clarity and organization. Many of the HTML files have different requirements, and even different CSS stylings, so we elected to group many of these into separate folders \& files. We wanted an API-like approach for the JavaScript, which involved a lot of files with exportable functions. We preferred to have more files rather than less files, so that each file represented a logical unit designed to achieve a few specific tasks. We hope our efforts make the codespace fairly intuitive to explore, but the average user does not need to know anything about our underlying implementation: just extract the CSV files into the root of \codeword{src/} (more on this in the \codeword{README.md}, then run \codeword{src/} on a local host of their choice. 
    
    There was much deliberation on how we wished to store the data from the CSV files; whether we wanted to perform read operations-as-a-service (perform read operations when needed), or perform a single read, and cache all of the data on the stack of our JavaScript implementation. We decided on the cache model, since our dataset is not too large (approximately 79,518 CSV rows) Our performance is pretty good because of this.
    
    GitHub usage \& etiquette was also a critical part of our implementation. If we worked on tasks that significantly changed the codespace, or introduced new files, we did this on separate local branches, and opened up a Pull Request (PR) to properly merge changes onto main (when we were ready to commit our changes and had ensured they were working). This ended up being an adequate system, and we could resolve conflicts in the PR with relative ease, keeping the process quick. We communicated on Discord to notify the team if there were significant changes, and in the case of PRs, we'd open a PR and request review from the other members of the team (after resolving merge conflicts).

    One last implementation concern was the storage of timeline annotations. Since we have around 100 snippets of text that vary year-to-year, we created a dictionary with "keys" being the year, corresponding to a list of annotations for the given year in no particular order. We'd index into the appropriate key, and send this as an argument to the method (pairing the given year and the county together). Initially, there was an idea to have annotations tailored to each county, but this became too thin to rely on, so we decided to have annotations for each year, across all the counties. 

\section{Evaluation Methods, Case Studies, \& Insights}
 
    Our key evaluation method was to have a clear idea on the visualization idiom and what it should reflect, so we made sure to have a consensus before proceeding further. Then, we independently tested the visualization, noting any discrepancies as we did so, to ensure maximum coverage (since we would all likely spot different issues). We compared our individual interpretations of the vis idiom against what we presented in the team presentation, the contents of the proposal report, as well as the progress report, just to make sure we did not miss a detail that we had intended to include (especially since it is such a sizable project). When all was said \& done, we had a clear idea of what deliverables had been implemented, and what we had missed. Much of this process consisted of polishing UI/UX features, and ensuring our visualizations reflected the connection we were creating between gentrification and Silicon Valley.
    
    As previously mentioned, our case study is how Silicon Valley has affected gentrification indicators from 2010-2023; this contemporary approach solidifies the idea that this is not only a current issue, but that it is also accelerating. The most important component of this case study was showing that the \textit{magnitude} of Silicon Valley's success is tied to the \textit{magnitude} of gentrification, and that the two correlate to each other as the user explores the years. We did not succeed across the board; some counties in the Bay Area are not nearly as affected as others. And in some places, data is missing. But overall, the case study indicated that there is significant gentrification in the counties of San Francisco and Santa Clara, and explicitly, in sectors where Silicon Valley is typically associated. These counties have the lion's share of startups \& corporations, so they are notably impacted.
    
    It's important to note that there seems to be a huge leap in the population for the educational attainment variable, across the board, from the year 2014 to 2015 (see the introductory article for more details on precisely how this variable is defined). At an unprecedented scale. It then normalizes around this value, and there are no leaps nearly as significant into 2023. We checked and sanitized our data multiple times, and it seems like if there is an error here, the ACS table's variables might differ very subtly. We used the exact same ACS code for all years, so we couldn't ascertain precisely why this is happening (if it is an error). Other than this artifact, we did not experience irregular output in the data. The 2015 heatmap for all counties is noticeably gentrified because of this disparity. You can see this leap in magnitude clearly in the bar plot component of the dashboard, for educational attainment!
    
    The main insight is the success of Silicon Valley has indeed propelled gentrification, even in contemporary times. It has been hastened by the coronavirus pandemic, with Silicon Valley at-large receiving record profits during this time period. While the confluence of things which affect gentrification is dynamic \& complicated, it is evident that Silicon Valley is an incredibly significant factor in the present gentrification crisis, and it will seemingly worsen as the demand for tech continues to expand (especially as AI/ML models become more sophisticated, and more people use them for every aspect of their workflow). 

\section{Directions for Further Work}

    When it comes to further work, this problem could benefit from a more involved \& sophisticated dataset. Gentrification has a wide scope: shifts in demographics, internalized racism, changes in the cultural fabric of communities, and how the onset of new, wealthy neighbors can impact the lives of longtime residents (and in some cases, push them out). A visualization idiom for such a problem can become very robust, and much more intricate than what team-17 has put together. For further work, ACS variables that relate to gender, race, \& age demographics (for the 5 highlighted gentrification variables) could aid in telling a more nuanced story, and create an even more enlightening visualization. 

    And similarly, timeline annotations that report on how the \textit{people} of the Bay Area are affected, and not just how Silicon Valley has experienced unprecedented success from 2010-2023, could help in tying ideas together into one cohesive visualization. As it stands, our mission to connect gentrification to Silicon Valley success has been reasonably achieved, but gentrification as a complicated and multivariate phenomenon has not been precisely charted. Further research for sources that link these ideas together could make for a vivid, informationally rich visualization.

    As a final aside, investing more time in seamless UI/UX would be a good idea. Due to the deadline, the visualization is not as "transitional" as we would have liked. Tying the timeline annotations and the timeline bar more closely together could be an excellent UI/UX feature as well. 
    
\section{Team's Effort Division}

Team 17 feels that every member of the team has contributed satisfactorily to our Bay Area Gentrification project, serving in different roles and capacities as the need arose. Thank you for this project! We learned a lot about software engineering, delivering a product as a team, working in a collaborative technical environment, and having fun along the way!

\nocite{*}
\bibliographystyle{alpha}
\bibliography{refs}

\end{document}